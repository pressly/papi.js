!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Papi=e()}}(function(){return function e(t,r,n){function o(s,u){if(!r[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var p=r[s]={exports:{}};t[s][0].call(p.exports,function(e){var r=t[s][1][e];return o(r?r:e)},p,p.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){function n(e,t){t||(t={});var r=null,n=function(){e.memoize={},r=null},o="number"==typeof t.maxAge&&!t.individualExpiry,i="number"==typeof t.maxAge&&t.individualExpiry;return function(){for(var s=Array.prototype.slice.call(arguments),u="$",a=s.length,c=null;a--;)c=s[a],u+=c===Object(c)?JSON.stringify(c):c,e.memoize||(e.memoize={});return u in e.memoize?e.memoize[u]:(o&&!r?r=setTimeout(n,t.maxAge):i&&setTimeout(function(){delete e.memoize[u]},t.maxAge),e.memoize[u]=e.apply(this,s))}}t.exports=n},{}],2:[function(e,t,r){(function(r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){return JSON.parse(JSON.stringify(e))}function a(e){return e.replace(/s$/,"")}function c(e){return e.replace(/s$/,"")}function p(e){return e.charAt(0).toUpperCase()+e.slice(1)}function f(e){return c(x(e.split("_"),function(e){return p(e)}).join(""))}var h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=e("querystring"),m=n(d),y=Object.prototype.hasOwnProperty,v=function(e){return"number"==typeof e},b=function(e){return"string"==typeof e},g=function(e){return"function"==typeof e},w=Array.isArray,P=function(e){var t="undefined"==typeof e?"undefined":l(e);return null!=e&&("object"==t||"function"==t)},$=function(e){if(w(e)||b(e))return!e.length;for(var t in e)if(y.call(e,t))return!1;return!0},j=function(e){return e&&e.length&&e[e.length-1]},E=function(e,t){if(null==e)return e;if(w(e))for(var r=-1,n=e.length;++r<n&&t(e[r],r)!==!1;);else if(P(e))for(var o in e)if(y.call(e,o)&&t(e[o],o)===!1)break;return e},x=function(e,t){if(null==e)return e;var r=[];if(w(e))for(var n=-1,o=e.length;++n<o;)r.push(t(e[n],n));else if(P(e))for(var i in e)y.call(e,i)&&r.push(t(e[i],i));return r},q=function(e,t){var r=[];if(w(e))for(var n=-1,o=e.length;++n<o;){var i=e[n],s=!0;for(var u in t)if(y.call(t,u)&&(!y.call(i,u)||i[u]!=t[u])){s=!1;break}s&&r.push(i)}return r},O=function(e,t){var r=void 0;if(w(e))for(var n=-1,o=e.length;++n<o;){var i=e[n],s=void 0;if(g(t)){var u=t;u(i,n)&&(s=!0)}else if(P(t))for(var a in t)if(s=!0,y.call(t,a)&&(!y.call(i,a)||i[a]!=t[a])){s=!1;break}if(s){r=i;break}}return r},_=function(e){var t={};for(var r in e)y.call(e,r)&&(t[r]=e[r]);return t},S=function(e){var t={};return e&&!$(e)&&E(e.split(","),function(e){var r=e.split(";"),n=r[0],o=r[1];n=n.replace(/<(.*)>/,"$1").trim(),o=o.replace(/rel="(.*)"/,"$1").trim(),t[o]=n}),t},R=function(e){return e.replace(/([A-Z])/g,function(e){return"_"+e.toLowerCase()})},T=function(){function e(t,r){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!1;s(this,e);var i=this.constructor.definition;if("undefined"==typeof i)throw new Error("Resource: Must supply a proper definition");if(this.api=t,this.options={},this.name=i.name,this.key=i.key,this.children=x(i.children,function(e,t){return t})||[],this.depth=r?r.depth+1:1,this.route=u(i.route),this.route.queryParams={},this.actions=u(i.actions),r){var c={};E(r.route.paramNames,function(e){var t=e;r.key!=n.key&&"id"==e&&(t=a(r.name)+"Id"),c[t]=r.route.params[e]}),h(this.route.params,c),o&&(this.route.queryParams=_(r.route.queryParams))}this.parent=function(){return r||i.parent&&this.api.$resource(i.parent.key)||null}}return e.prototype.createResource=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;return new this.constructor(this.api,this,e)},e.prototype.request=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.action?this.buildActionPath(t.action):this.buildPath();return this.api.request(t.method||"get",r,h({},this.options,{query:h({},this.route.queryParams,t.query),data:t.data})).then(function(t){return e.setResponse(t),t.data})},e.prototype.buildPath=function(){var e=this,t=this.route.segments.join("");return E(this.route.paramNames,function(r){var n=e.route.params[r];if(!n&&e.route.segments.length>1&&r!==e.route.paramName)throw new Error("$resource: Can't make request because route was missing '"+r+"' param.");t=t.replace("/:"+r,n?"/"+n:"")}),t},e.prototype.buildActionPath=function(e){var t=this.route.segments;e.options.routeSegment&&t.splice(t.length-1,1,e.options.routeSegment);var r=t.join("");return E(this.route.params,function(e,t){r=r.replace("/:"+t,e?"/"+e:"")}),r+=e.options.path?e.options.path:"/"+e.name},e.prototype.includeParams=function(e){var t=this;return E(e,function(e,r){t.route.params.hasOwnProperty(r)?t.route.params[r]=e:t.route.queryParams[r]=e}),this},e.prototype.query=function(e){return h(this.route.queryParams,e),this},e.prototype.limit=function(e){return this.query({limit:e}),this},e.prototype.timeout=function(e){return this.options.timeout=e,this},e.prototype.$get=function(e){var t=this.createResource(!0).includeParams(e);return t.request().then(function(e){return t.hydrateModel(e)})},e.prototype.$find=function(e){e&&!P(e)&&(e={id:e});var t=this.createResource(!0).includeParams(e);return t.request().then(function(e){return t.hydrateModel(e)})},e.prototype.$all=function(e){var t=this.createResource(!0).includeParams(e);return t.request().then(function(e){return t.hydrateCollection(e)})},e.prototype.$build=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.createResource();return t.hydrateModel(e,{newRecord:!e[this.route.paramName]})},e.prototype.$create=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.$build(e).$save()},e.prototype.setResponse=function(e){this.status=e.status,this.headers=e.headers,this.links={},e.headers&&e.headers.has("Link")&&(this.links=S(e.headers.get("Link")))},e.prototype.sync=function(e){var t=this;E(Object.keys(this.route.params),function(r){if(!t.route.params[r]){var n=R(r);t.route.params[r]=e[n]}}),E(this.actions,function(r){r.options.paramName&&(t.route.params[r.options.paramName]=e[r.options.paramName])})},e.prototype.hydrateModel=function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new this.constructor.modelClass(e);return this.sync(e),r.newRecord||(n.$newRecord=!1),Object.defineProperty(n,"$resource",{enumerable:!1,value:function(e){return $(e)?t:t.api.$resource(e,t)}}),n},e.prototype.hydrateCollection=function(e){var t=this,r=x(e,function(e){var r=t.createResource(),n=r.hydrateModel(e);return n}),n=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.links&&t.links.hasOwnProperty(e)?t.api.request("get",t.links[e]).then(function(e){if(n.append||n.prepend){t.setResponse(e);var o=n.append?"push":"unshift";return E(e.data,function(e){r[o](t.hydrateModel(e))}),r}return t.setResponse(e),t.hydrateCollection(e.data)}):void 0},o={$resource:function(){return t},$nextPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("next",e)},$prevPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("prev",e)},$hasPage:function(e){return t.links&&t.links.hasOwnProperty(e)},$find:function(e){return O(r,function(t){return t.id==e})},$findWhere:function(e){return O(r,e)},$where:function(e){return q(r,e)},$build:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.createResource();return r.hydrateModel(e,{newRecord:!e[t.route.paramName]})},$create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.$build(e).$save()},$add:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!1;return"object"!=("undefined"==typeof e?"undefined":l(e))||e instanceof t.constructor.modelClass||(e=r.$build(e)),v(n)?r.splice(n,0,e):r.push(e),o&&r.$sort(),e},$remove:function(e){if(w(e)){var n=e;return E(n,function(e){r.$remove(e)}),n}var o;return v(e)?o=e:e instanceof t.constructor.modelClass&&(o=r.indexOf(e)),o>=0&&o<r.length?r.splice(o,1)[0]:void 0},$reposition:function(e,t){if(e!=t&&e>=0&&e<r.length&&t>=0&&t<r.length){var n=r.$remove(e);if(n)return r.$add(n,t,!1)}},$sort:function(){},$delete:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e instanceof t.constructor.modelClass?e.$delete(n).then(function(){return r.$remove(e)}):void 0},$data:function(){return x(r,function(e){return e.$data()})}};return h(r,o),r},e}(),k=function(){function e(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,e),h(this,t),Object.defineProperty(this,"$newRecord",{enumerable:!1,writable:!0,value:!0})}return e.prototype.$delete=function(e){return this.$resource().request({method:"delete",query:e})},e.prototype.$save=function(e){var t=this,r=this.$newRecord?"post":"put";return this.$resource().request({method:r,data:this,query:e}).then(function(e){return t.$newRecord=!1,t.$resource().sync(e),h(t,e)})},e.prototype.$attributes=function(){return Object.keys(this)},e.prototype.$data=function(){var e=this;return this.$attributes().reduce(function(t,r){return t[r]=e[r],t},{})},e}(),A=function(e){function t(){return s(this,t),o(this,e.apply(this,arguments))}return i(t,e),t}(k),C=function(e){function t(){return s(this,t),o(this,e.apply(this,arguments))}return i(t,e),t}(k),N=function(e){function t(){return s(this,t),o(this,e.apply(this,arguments))}return i(t,e),t}(k),U=function(e){function t(){return s(this,t),o(this,e.apply(this,arguments))}return i(t,e),t}(k),B=function(e){function t(){return s(this,t),o(this,e.apply(this,arguments))}return i(t,e),t}(k),I=function(e){function t(){return s(this,t),o(this,e.apply(this,arguments))}return i(t,e),t}(k),M=function(e){function t(){return s(this,t),o(this,e.apply(this,arguments))}return i(t,e),t}(k),D=function(e){function t(){return s(this,t),o(this,e.apply(this,arguments))}return i(t,e),t}(k),z=function(e){function t(){return s(this,t),o(this,e.apply(this,arguments))}return i(t,e),t}(k),F=function(e){function t(){return s(this,t),o(this,e.apply(this,arguments))}return i(t,e),t}(k),L=function(e){function t(){return s(this,t),o(this,e.apply(this,arguments))}return i(t,e),t}(k),H=function(e){function t(){return s(this,t),o(this,e.apply(this,arguments))}return i(t,e),t}(k),J=function(e){function t(){return s(this,t),o(this,e.apply(this,arguments))}return i(t,e),t}(k),G=function(e){function t(){return s(this,t),o(this,e.apply(this,arguments))}return i(t,e),t}(k),X=function(e){function t(){return s(this,t),o(this,e.apply(this,arguments))}return i(t,e),t}(k),K=function(e){function t(){return s(this,t),o(this,e.apply(this,arguments))}return i(t,e),t}(k),W=function(e){function t(){return s(this,t),o(this,e.apply(this,arguments))}return i(t,e),t}(k),Z=function(e){function t(){return s(this,t),o(this,e.apply(this,arguments))}return i(t,e),t}(k),Q=function(e){function t(){return s(this,t),o(this,e.apply(this,arguments))}return i(t,e),t}(k),V=Object.freeze({Base:k,Account:A,Organization:C,App:N,Asset:U,CodeRevision:B,Collection:I,Comment:M,Draft:D,Feed:z,FeedAsset:F,Hub:L,Invite:H,Like:J,Post:G,Recommendation:X,Style:K,Tag:W,User:Z,Widget:Q}),Y=function(e){var t,r=e,n=[];if(r.options.route)t=r.options.route;else{for(;r;){var o=r.options.routeSegment?te(r.options.routeSegment)[0]:r.options.paramName||"id";r!==e&&(o=c(r.name)+p(o));var i=r.options.routeSegment?r.options.routeSegment.replace(/\/:[^\/]+$/,"/:"+o):"/"+r.name+"/:"+o;n.unshift(i),r=r.parent}t=n.join("")}var s=te(t),u={};return E(s,function(e){u[e]=null}),{path:t,segments:n,segment:n[n.length-1],params:u,paramNames:s,paramName:s[s.length-1]}},ee=/:[^\/]+/gi,te=function(e){return x(e.match(ee),function(e){return e.slice(1)})},re=function(e,t){for(var r=e,n=[];r;)n.unshift(r.name),r=r.parent;return n.join(".")},ne=function(){function e(){s(this,e)}return e.prototype.$resource=function(){var e=arguments[0];if("undefined"==typeof e)throw new Error("$resource: key is undefined");var t=j(e.split(".")),r=!P(arguments[1])||arguments[1]instanceof T?void 0:arguments[1],n=arguments[2]||!r&&arguments[1]||void 0;if(n){if(-1==n.children.indexOf(t))throw new Error("$resource: key not found in parent resource.");e=n.key+"."+t}var o=this.constructor.resourceClasses[e];if("undefined"==typeof o)throw new Error("$resource: key '"+e+"' does not exist in schema.");return new o(this,n).includeParams(r)},e.prototype.$=function(){return this.$resource.apply(this,arguments)},e}();ne.defineSchema=function(){var e=this;e.models=V,e.resourceClasses={};var t=function r(t,n){return{current:null,resource:function(r,u){u=u||{};var a=n?n.current:null,c={name:r,parent:a,children:{},options:u};u.link&&(c.link=u.link),c.key=re(c),c.route=Y(c),c.actions=[],c.modelName=u.modelName||f(r),this.current=t[r]=c;var p=function(e){function t(){return s(this,t),o(this,e.apply(this,arguments))}return i(t,e),t}(T);return p.definition=c,p.modelClass=V[c.modelName]||k,e.resourceClasses[c.key]=p,this},open:function(){return r(this.current.children,this)},close:function(){return n},action:function u(t,r,o){var u={method:t,name:r,options:o};u.options.routeSegment&&(u.options.paramName=te(u.options.routeSegment)[0]),n&&n.current&&n.current.actions.push(u);var i=e.resourceClasses[n.current.key];if("resource"==o.on){if(i.prototype.hasOwnProperty("$"+r))throw"Attempted to create an action '"+r+"' that already exists.";i.prototype["$"+r]=function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.request(h({method:t,action:u},{data:r})).then(function(t){return w(t)?e.hydrateCollection(t):e.hydrateModel(t)})}}else if("member"==o.on){if(i.prototype.hasOwnProperty("$"+r))throw"Attempted to create an action '"+r+"' that already exists.";i.prototype["$"+r]=function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.request(h({method:t,action:u},{data:r})).then(function(t){return e.hydrateModel(t)})},i.modelClass.prototype["$"+r]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.$resource()["$"+r](e)}}return this},get:function(){return this.action.apply(this,["get"].concat(Array.prototype.slice.call(arguments)))},post:function(){return this.action.apply(this,["post"].concat(Array.prototype.slice.call(arguments)))},put:function(){return this.action.apply(this,["put"].concat(Array.prototype.slice.call(arguments)))},patch:function(){return this.action.apply(this,["patch"].concat(Array.prototype.slice.call(arguments)))},"delete":function(){return this.action.apply(this,["delete"].concat(Array.prototype.slice.call(arguments)))}}};return h({},t({}))},r.Promise||(r.Promise=e("promiz"));var oe=e("dodgy");r.fetch||(r.fetch=e("isomorphic-fetch"));var ie=e("../lib/memoize"),se=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,t);var n=o(this,e.apply(this,arguments));return n.options=r,n.options.host=r.host||"https://api.pressly.com",n.requestMiddlewares=[],n.responseMiddlewares=[],n.metrics={sendEvent:function(e,t){n.request("post","/metrix/events/"+e,t)}},n.auth={session:null,get:function(){return n.request("get","/session").then(function(e){return n.auth.set(e.data)})},set:function(e){if(!e.jwt)throw new Error("Papi:Auth: Invalid session response - missing jwt");return n.auth.session=e,n.auth.session},isLoggedIn:function(){return!!n.auth.session&&!n.auth.isExpired()},isExpired:function(){return!1},login:function(e,t){return n.request("post","/auth",{data:{email:e,password:t}}).then(function(e){return n.auth.set(e.data)})},requestPasswordReset:function(e){return n.request("post","/auth/password_reset",{data:{email:e}})},requestNetworkCreds:function(e){return new Promise(function(t,r){var o=n.options.host+("/auth/"+e+"?close=true");window.open(o);var i=function s(e){/localhost|api\.pressly\.com/.test(e.origin)?t(e.data):r(),window.removeEventListener("message",s)};window.addEventListener("message",i)})},logout:function(){return n.auth.session=null,n.request("delete","/session").then(function(e){return e})}},1==n.options.memoize&&(n.request=ie(n.request,{maxAge:1e3,individualExpiry:!0})),n}return i(t,e),t.prototype.request=function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new oe(function(o,i,s){var u=/^(https?:)?\/\//.test(t)?t:r.options.host+t,a={url:u,method:e,headers:{},query:{},credentials:"include"};r.auth.session&&r.auth.session.jwt&&(a.headers.Authorization="Bearer "+r.auth.session.jwt),a.headers.Accept="application/vnd.pressly.v2.0+json",n.query&&h(a.query,n.query),n.data&&("get"==e?h(a.query,n.data):"[object FormData]"===n.data.toString()?a.body=n.data:a.body=JSON.stringify(n.data)),a.body&&"[object FormData]"!==a.body.toString()&&(a.headers["Content-Type"]="application/json"),$(a.query)||(a.url+="?"+m["default"].stringify(a.query));var c={},p=function(){if(r.requestMiddlewares.length){var e=0,t=function n(){var t=r.requestMiddlewares[++e]||f;return t(a,c,n,o,i)};r.requestMiddlewares[0](a,c,t,o,i)}else f()},f=function(){fetch(a.url,a).then(function(e){return e.status>=200&&e.status<300?(c=e,void e.json().then(function(e){c.data=e||{}})["catch"](function(e){c.data={}}).then(function(){l()})):i(e)})["catch"](function(e){return i(e)})},l=function(){if(r.responseMiddlewares.length){var e=0,t=function n(){var t=r.responseMiddlewares[++e]||d;return t(a,c,n,o,i)};r.responseMiddlewares[0](a,c,t,o,i)}else d()},d=function(){o(c)};s(function(e){}),p()})},t.prototype.before=function(e){this.requestMiddlewares.push(e)},t.prototype.after=function(e){this.responseMiddlewares.push(e)},t}(ne);t.exports=se,void 0==se.defineSchema&&(se.defineSchema=ne.defineSchema),se.defineSchema().resource("accounts").open().get("available",{on:"resource"}).post("become",{on:"member"}).resource("users").resource("hubs",{link:"hubs"}).close().resource("organizations").open().resource("users").resource("hubs").resource("invites").open().post("bulk_invite",{on:"resource"}).post("resend",{on:"member"}).put("accept",{on:"member",routeSegment:"/invites/:hash"}).put("reject",{on:"member",routeSegment:"/invites/:hash"}).close().close().resource("activity").resource("posts",{routeSegment:"/stream/posts/:id"}).resource("hubs").open().get("search",{on:"resource"}).post("upgrade",{on:"member"}).post("follow",{on:"member"})["delete"]("unfollow",{on:"member",path:"/follow"}).get("reach",{on:"member"}).resource("widgets").open().get("dimensions",{on:"resource"}).close().get("styles",{on:"member",path:"/apps/current/styles"}).resource("apps").open().get("current",{on:"resource"}).get("build",{on:"member",path:"/build_app"}).get("status",{on:"member"}).resource("styles").close().resource("addons").open().resource("configs").close().resource("analytics").open().get("summary",{on:"resource"}).get("visitors",{on:"resource"}).get("pageviews",{on:"resource"}).get("duration",{on:"resource"}).close().resource("feeds").open().resource("assets",{modelName:"FeedAsset"}).close().resource("invites").open().get("users",{on:"resource"}).post("bulk_invite",{on:"resource"}).post("resend",{on:"member"}).put("accept",{on:"member",routeSegment:"/invites/:hash"}).put("reject",{on:"member",routeSegment:"/invites/:hash"}).close().resource("recommendations").resource("users").open().post("grant_access",{on:"resource"})["delete"]("revoke_access",{on:"member"}).close().resource("collaborators",{modelName:"User"}).resource("collections").open().put("reorder",{on:"resource"}).close().resource("tags").resource("assets",{routeSegment:"/stream/:id"}).open().put("feature",{on:"member"}).put("unfeature",{on:"member"}).put("hide",{on:"member"}).put("unhide",{on:"member"}).put("lock",{on:"member"}).put("unlock",{on:"member"}).resource("likes").resource("comments").close().resource("posts",{routeSegment:"/posts/published/:id"}).open().put("hide",{on:"member"}).put("unhide",{on:"member"}).put("reorder",{on:"member"}).resource("contributions").close().resource("scheduled",{routeSegment:"/posts/scheduled/:id"}).open().put("publish",{on:"member"}).put("unpublish",{on:"member"}).close().resource("submissions",{routeSegment:"/posts/submissions/:id"}).open().put("publish",{on:"member"}).put("unpublish",{on:"member"}).close().resource("drafts",{routeSegment:"/posts/drafts/:id"}).open().put("publish",{on:"member"}).close().resource("deleted",{routeSegment:"/posts/deleted/:id"}).close().resource("invites").open().get("incoming",{on:"resource"}).get("outgoing",{on:"resource"}).post("bulk_invite",{on:"resource"}).post("resend",{on:"member"}).put("accept",{on:"member",routeSegment:"/invites/:hash"}).put("reject",{on:"member",routeSegment:"/invites/:hash"}).close().resource("code_revisions").open().get("fetch_repo",{on:"member"}).resource("hubs",{link:"hubs"}).close().resource("signup").open().get("account_uid_available",{on:"member"}).get("account_email_available",{on:"member"}).close().resource("users").open().get("roles",{on:"resource"}).resource("hubs").resource("organizations").close().resource("discover").open().resource("users",{link:"users"}).resource("organizations",{link:"organizations"}).resource("hubs",{link:"hubs"}).open().get("popular",{on:"resource"}).close().resource("posts").close().resource("creds").open().post("share",{on:"member"}).close().resource("stream").open().close()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lib/memoize":1,dodgy:3,"isomorphic-fetch":4,promiz:5,querystring:8}],3:[function(e,t,r){function n(e,t){var r,n,i,s=!1,u=new Promise(function(t,o){e(r=function(e){s=!0,t(e)},n=function(e){s=!0,o(e)},function(e){i=function(t){s||n(e((s=!0)&&t))}})});return i?o(u,!!t,r,n,i):u}function o(e,t,r,n,i){function s(s){return function(){return o(s.apply(e,arguments),t,r,n,i)}}return e.then=s(e.then),e["catch"]=s(e["catch"]),e.abort=i,t&&(e.resolve=r,e.reject=n),e}n.race=function(e){function t(t){for(var r=0;r<e.length;r++)"abort"in e[r]&&e[r].abort();return t}var r=Promise.race(e).then(t);return r.abort=t,r},t.exports=n,n.Promise=n},{}],4:[function(e,t,r){e("whatwg-fetch"),t.exports=self.fetch.bind(self)},{"whatwg-fetch":9}],5:[function(e,t,r){!function(){function e(e){global.setImmediate?setImmediate(e):global.importScripts?setTimeout(e):(n++,o[n]=e,global.postMessage(n,"*"))}function r(t){"use strict";function n(e,t,r,n){if(2==a)return n();if("object"!=typeof c&&"function"!=typeof c||"function"!=typeof e)n();else try{var o=0;e.call(c,function(e){o++||(c=e,t())},function(e){o++||(c=e,r())})}catch(i){c=i,r()}}function o(){var e;try{e=c&&c.then}catch(t){return c=t,a=2,o()}n(e,function(){a=1,o()},function(){a=2,o()},function(){try{1==a&&"function"==typeof i?c=i(c):2==a&&"function"==typeof s&&(c=s(c),a=1)}catch(t){return c=t,f()}c==u?(c=TypeError(),f()):n(e,function(){f(3)},f,function(){f(1==a&&3)})})}if("function"!=typeof t&&void 0!=t)throw TypeError();if("object"!=typeof this||this&&this.then)throw TypeError();var i,s,u=this,a=0,c=0,p=[];u.promise=u,u.resolve=function(t){return i=u.fn,s=u.er,a||(c=t,a=1,e(o)),u},u.reject=function(t){return i=u.fn,s=u.er,a||(c=t,a=2,e(o)),u},u._d=1,u.then=function(e,t){if(1!=this._d)throw TypeError();var n=new r;return n.fn=e,n.er=t,3==a?n.resolve(c):4==a?n.reject(c):p.push(n),n},u["catch"]=function(e){return u.then(null,e)};var f=function(e){a=e||4,p.map(function(e){3==a&&e.resolve(c)||e.reject(c)})};try{"function"==typeof t&&t(u.resolve,u.reject)}catch(h){u.reject(h)}return u}global=this;var n=1,o={},i=!1;global.setImmediate||global.addEventListener("message",function(t){if(t.source==global)if(i)e(o[t.data]);else{i=!0;try{o[t.data]()}catch(t){}delete o[t.data],i=!1}}),r.resolve=function(e){if(1!=this._d)throw TypeError();return e instanceof r?e:new r(function(t){t(e)})},r.reject=function(e){if(1!=this._d)throw TypeError();return new r(function(t,r){r(e)})},r.all=function(e){function t(r,o){if(o)return n.resolve(o);if(r)return n.reject(r);var i=e.reduce(function(e,t){return t&&t.then?e+1:e},0);0==i&&n.resolve(e),e.map(function(r,n){r&&r.then&&r.then(function(r){return e[n]=r,t(),r},t)})}if(1!=this._d)throw TypeError();if(!(e instanceof Array))return r.reject(TypeError());var n=new r;return t(),n},r.race=function(e){function t(r,o){if(o)return n.resolve(o);if(r)return n.reject(r);var i=e.reduce(function(e,t){return t&&t.then?e+1:e},0);0==i&&n.resolve(e),e.map(function(e,r){e&&e.then&&e.then(function(e){t(null,e)},t)})}if(1!=this._d)throw TypeError();if(!(e instanceof Array))return r.reject(TypeError());if(0==e.length)return new r;var n=new r;return t(),n},r._d=1,"undefined"!=typeof t?t.exports=r:global.Promise=global.Promise||r}()},{}],6:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,i){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var u=/\+/g;e=e.split(t);var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var c=e.length;a>0&&c>a&&(c=a);for(var p=0;c>p;++p){var f,h,l,d,m=e[p].replace(u,"%20"),y=m.indexOf(r);y>=0?(f=m.substr(0,y),h=m.substr(y+1)):(f=m,h=""),l=decodeURIComponent(f),d=decodeURIComponent(h),n(s,l)?o(s[l])?s[l].push(d):s[l]=[s[l],d]:s[l]=d}return s};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],7:[function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var o=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,u){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(s(e),function(s){var u=encodeURIComponent(o(s))+r;return i(e[s])?n(e[s],function(e){return u+encodeURIComponent(o(e))}).join(t):u+encodeURIComponent(o(e[s]))}).join(t):u?encodeURIComponent(o(u))+r+encodeURIComponent(o(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],8:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":6,"./encode":7}],9:[function(e,t,r){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function r(e){return"string"!=typeof e&&(e=String(e)),e}function n(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return m.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function s(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function u(e){var t=new FileReader;return t.readAsArrayBuffer(e),s(t)}function a(e){var t=new FileReader;return t.readAsText(e),s(t)}function c(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(m.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(m.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob?(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(u)},this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return a(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=i(this);return e?e:Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(e){var t=e.toUpperCase();return y.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var r=t.body;if(f.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,r||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=p(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function l(e){var t=new o,r=(e.getAllResponseHeaders()||"").trim().split("\n");return r.forEach(function(e){var r=e.trim().split(":"),n=r.shift().trim(),o=r.join(":").trim();t.append(n,o)}),t}function d(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof o?t.headers:new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var m={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};o.prototype.append=function(e,n){e=t(e),n=r(n);var o=this.map[e];o||(o=[],this.map[e]=o),o.push(n)},o.prototype["delete"]=function(e){delete this.map[t(e)]},o.prototype.get=function(e){var r=this.map[t(e)];return r?r[0]:null},o.prototype.getAll=function(e){return this.map[t(e)]||[];
},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,n){this.map[t(e)]=[r(n)]},o.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){e.call(t,n,r,this)},this)},this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),n(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),n(e)},m.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},c.call(f.prototype),c.call(d.prototype),d.prototype.clone=function(){return new d(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},d.error=function(){var e=new d(null,{status:0,statusText:""});return e.type="error",e};var v=[301,302,303,307,308];d.redirect=function(e,t){if(-1===v.indexOf(t))throw new RangeError("Invalid status code");return new d(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=f,e.Response=d,e.fetch=function(e,t){return new Promise(function(r,n){function o(){return"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0}var i;i=f.prototype.isPrototypeOf(e)&&!t?e:new f(e,t);var s=new XMLHttpRequest;s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:l(s),url:o()},t="response"in s?s.response:s.responseText;r(new d(t,e))},s.onerror=function(){n(new TypeError("Network request failed"))},s.ontimeout=function(){n(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials&&(s.withCredentials=!0),"responseType"in s&&m.blob&&(s.responseType="blob"),i.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},{}]},{},[2])(2)});